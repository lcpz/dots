#! /bin/bash
# updates an arch-linux system

if [ -n "$1" ]
then
	printf ":: Updating mirrors...\n"
	sudo cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup
	sudo reflector -l 5 --sort rate --save /etc/pacman.d/mirrorlist
fi

sudo pacman -Syu

dip=$(pacman -Qdtq)
if [ -z $dip ]
then
	printf "\n:: No unnecessary dependencies found\n\n"
else
	printf "\n:: Removing unnecessary dependencies\n\n"
	sudo pacman -Rs $dip
fi

sudo pacman -Sc

printf "\n:: Checking for AUR updates...\n"
cower -u
